<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Resources</title>
    <link rel="stylesheet" href="stylesheet.css"> 
</head>
<body>
    <div id="sidebar">
        <h2>Navigation</h2>
        <ul>
            <li><a href="index.html"><span>Home</span></a></li>
            <li><a href="employees.html"><span>Manage Employees</span></a></li>
            <li><a href="positions.html"><span>Manage Positions</span></a></li>
            <li><a href="projects.html"><span>Manage Projects</span></a></li>
            <li><a href="resources.html"><span>Manage Resources</span></a></li>
            <li><a href="employee_positions.html"><span>Manage Employee Positions</span></a></li>
            <li><a href="project_employees.html"><span>Manage Project Employees</span></a></li>
        </ul>
    </div>
    <button id="toggleButton"></button>
    <div id="content">
        <h1>Manage Resources</h1>

        <div id="table-placeholder"></div>

        <div id="filter-row">Filter by Project: <span id="project-filter-placeholder"></span></div>

        <script src="common.js"></script>
        <script>
            var tablePlaceholder = document.getElementById("table-placeholder")
            var resources = getData("/resources");
            var projects = getData("/projects");
            var resourceDataTypes = [
                {header: "Resource ID", attribName: "resourceID", type: "num0", nullable: false, autoinc: true},
                {header: "Resource Name", attribName: "resourceName", type: "text", nullable: false},
                {header: "Resource Cost", attribName: "resourceCost", type: "num2", nullable: true},
                {header: "Resource Description", attribName: "resourceDesc", type: "text", nullable: true},
                {header: "Project Name", attribName: "projectName", type: "text", nullable: true, fkinfo: {
                    attribName: "projectName",
                    fkName: "projectID",
                    pkName: "projectID",
                    data: projects
                }}];
            let resourcesTable = newTableFromData(resources, resourceDataTypes);
            tablePlaceholder.append(resourcesTable);
            
            var filterPlaceholder = document.querySelector("#project-filter-placeholder");
            var fkFilter = addFKFilterToTable(resourcesTable, projects, "projectName", "projectID", true, resourceDataTypes, "/resources/projects/");
            filterPlaceholder.append(fkFilter);
        </script>
    </div>
</body>
</html>
